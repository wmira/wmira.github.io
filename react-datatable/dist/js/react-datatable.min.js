!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react")):"function"==typeof define&&define.amd?define(["react"],e):"object"==typeof exports?exports.RDT=e(require("react")):t.RDT=e(t.React)}(this,function(t){return function(t){function e(s){if(r[s])return r[s].exports;var n=r[s]={exports:{},id:s,loaded:!1};return t[s].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";var s=r(3)(r(1),r(2));t.exports=s},function(e){e.exports=t},function(t,e,r){"use strict";var s=r(1),n=r(4),o=r(5),i=(r(6),r(7)),a=r(8),p=r(9),c={pure:{table:"pure-table pure-table-bordered"},"pure-striped":{table:"pure-table pure-table-bordered pure-table-striped"},bootstrap:{table:"table table-bordered"},foundation:{table:""}},l=s.createClass({displayName:"RDT",onClick:function(t){var e=t.target,r=e.getAttribute("data-rdt-action");if("sort"===r){var s=e.getAttribute("data-col-property"),n=e.getAttribute("data-sort-direction");this.state.datasource.sort(s,n),this.forceUpdate()}},componentWillReceiveProps:function(t){this.setState(this._createStateFromProps(t))},nextPage:function(){this.state.pager&&this.setState({pager:this.state.pager.next()})},onDsChangeEvent:function(){this.props.onChange&&this.props.onChange()},_createStateFromProps:function(t){var e={};return t.data&&(e.datasource=new n(t.data,t.config)),t.config.pager&&(e.pager=new o(1,t.config.pager.rowsPerPage,e.datasource)),e},getInitialState:function(){return this._createStateFromProps(this.props)},pagerUpdated:function(t){this.state.pager&&this.setState({pager:this.state.pager.toPage(t)})},render:function(){var t=c[this.props.config.style],e=this.props.config,r=this.state.datasource,n=null;return this.state.pager&&(n=s.createElement(p,{pagerState:this.state.pager.state(),datasource:r,config:this.props.config,pageChangedListener:this.pagerUpdated})),s.createElement("div",{onClick:this.onClick},s.createElement("div",{className:"rdt-container",ref:"container"},s.createElement("table",{className:t.table},s.createElement(i,s.__spread({},this.props,{datasource:r})),s.createElement(a,{config:e,datasource:r,pager:this.state.pager}))),n)}});t.exports=l},function(t){"use strict";var e=function(t,e,r){return t.createElement(e,r)},r=function(t,r,s,n){var o={},i=null;return s.tagName&&s.nodeName&&"number"==typeof s.nodeType||"string"==typeof s?i=s:(o=s,i="string"==typeof n?document.getElementById(n):n),t.render(e(t,r,o),i)},s=function(t,s){return{cls:s,el:function(r){return e(t,s,r)},render:function(e,n){return r(t,s,e,n)}}};t.exports=s},function(t,e,r){"use strict";var s=r(12).EventEmitter,n=r(11),o={RECORD_UPDATED:"RECORD_UPDATED",RECORD_ADDED:"RECORD_ADDED",RECORDS_SORTED:"RECORDS_SORTED"},i=function(t,e){if(this.id=new Date,t instanceof Array)this.records=t;else{var r=t.data,s=t.datasource;this.records=s[r]}this.config=e,this.config&&(this.propertyConfigMap={},this.config.cols.forEach(function(t){this.propertyConfigMap[t.property]=t}.bind(this)))};i.prototype=s.prototype,i.prototype.constructor=i,i.prototype.record=function(t){return this.records[t]},i.prototype.append=function(t){this.records.push(t),this.emit(o.RECORD_ADDED,t)},i.prototype.length=function(){return this.records.length},i.prototype.sort=function(t,e){this.records.sort(function(r,s){var o=1;"-1"===e&&(o=-1);var i=this.propertyConfigMap[t],a=n.extractValue(t,i.path,r),p=n.extractValue(t,i.path,s),c=n.extractSortableType(a,p);return n.compare(c,a,p,o)}.bind(this)),this.emit(o.RECORDS_SORTED,{property:t,direction:e})},i.prototype.map=function(t,e){if(!t)return this.records.map(e);var r=[],s=0;console.log(t.endIdx);for(var n=t.startIdx;n<t.endIdx;n++)r.push(e(this.records[n],s++,n));return r},i.prototype.updateRecord=function(t,e,r){var s=this.records[t];n.updateRecord(e,r,this.propertyConfigMap[e],s),this.emit(o.RECORD_UPDATED,s,t,e,r)},t.exports=i},function(t){"use strict";var e=function(t,e,r){this.datasource=r,this.page=t,this.rowsPerPage=e,this.startIdx=(this.page-1)*e,this.endIdx=this.startIdx+this.rowsPerPage<this.datasource.records.length?this.startIdx+this.rowsPerPage:this.startIdx+(this.datasource.records.length-this.startIdx)};e.prototype.next=function(){return this.move(1)},e.prototype.previous=function(){return this.move(-1)},e.prototype.toPage=function(t){return this.move(t-this.page)},e.prototype.maxPage=function(){var t=parseInt(this.datasource.records.length/this.rowsPerPage);return this.datasource.records.length%this.rowsPerPage>0&&(t+=1),t},e.prototype.move=function(t){var r=this.maxPage();return this.page+t>r||this.page+t<0?this:new e(this.page+t,this.rowsPerPage,this.datasource)},e.prototype.state=function(){return{page:this.page,startIdx:this.startIdx,endIdx:this.endIdx,rowsPerPage:this.rowsPerPage,totalRecords:this.datasource.records.length,totalPage:this.maxPage()}},t.exports=e},function(t,e,r){"use strict";var s=r(1),n=r(10),o=s.createClass({displayName:"RDTRow",render:function(){var t=this.props.config.cols,e=this.props.record;return s.createElement("tr",{"data-index":this.props.index},t.map(function(t,r){return s.createElement(n,{config:this.props.config,onCellChange:this.onCellChange,index:this.props.index,key:r,datasource:this.props.datasource,col:t,property:t.property,record:e,path:t.path})}.bind(this)))}});t.exports=o},function(t,e,r){"use strict";var s=r(1),n="1",o="-1",i=s.createClass({displayName:"SortControl",render:function(){var t=this.props.isSortedColumn&&this.props.direction===n?"rdt-arrow-up-active":"rdt-arrow-up-inactive",e=this.props.isSortedColumn&&this.props.direction===o?"rdt-arrow-down-active":"rdt-arrow-down-inactive";return s.createElement("div",{style:{"float":"right"}},s.createElement("div",{"data-rdt-action":"sort","data-col-property":this.props.col.property,"data-sort-direction":n,className:"rdt-arrow-up "+t}),s.createElement("div",{style:{marginBottom:"5px"}}),s.createElement("div",{"data-rdt-action":"sort","data-col-property":this.props.col.property,"data-sort-direction":o,className:"rdt-arrow-down "+e}))}}),a=s.createClass({displayName:"RDTColumn",recordsSorted:function(t){this.setState({sortInfo:t})},getInitialState:function(){var t=this.props.datasource;return t.on("RECORDS_SORTED",this.recordsSorted),{datasource:this.props.datasource,showFilter:!1}},componentWillReceiveProps:function(t){t.datasource&&t.datasource.on("RECORDS_SORTED",this.recordsSorted)},render:function(){var t=this.props.config.cols,e=(this.state.datasource,this.state.sortInfo);return s.createElement("thead",{onClick:this.onClick},s.createElement("tr",null,t.map(function(t,r){var n=!1,o=null;return e&&e.property===t.property&&(n=!0,o=e.direction),s.createElement("td",{"data-th-key":t.property,key:t.property+"-th-"+r},s.createElement("div",null,s.createElement("span",null,t.header),s.createElement(i,{isSortedColumn:n,direction:o,col:t})))}.bind(this))))}});t.exports=a},function(t,e,r){"use strict";var s=r(1),n=r(6),o=s.createClass({displayName:"RDTBody",handleRecordUpdate:function(t,e){this.refs[e].forceUpdate()},componentDidMount:function(){this.props.datasource.on("RECORD_UPDATED",this.handleRecordUpdate)},render:function(){return s.createElement("tbody",null,this.props.datasource.map(this.props.pager,function(t,e,r){var o=e;return r&&!Array.isArray(r)&&(o=r),s.createElement(n,{ref:o,datasource:this.props.datasource,index:o,key:o,record:t,config:this.props.config})}.bind(this)))}});t.exports=o},function(t,e,r){"use strict";var s=r(1),n=s.createClass({displayName:"Paginator",pagerClickListener:function(t){var e=t.target,r=e.getAttribute("data-page");r&&(r=parseInt(r),this.props.pageChangedListener(r))},render:function(){var t=this.props.pagerState,e=3,r=t.page,n="",o="",i=function(){var i=[];i.push(s.createElement("li",{className:o},s.createElement("span",null,s.createElement("span",null,"«"))));for(var a=r;r+e>a;a++){var p="";a===t.page&&(p="active"),i.push(s.createElement("li",{className:p},s.createElement("a",{"data-page":a},a)))}return i.push(s.createElement("li",{className:n},s.createElement("span",null,s.createElement("span",null,"»")))),i};return s.createElement("div",{onClick:this.pagerClickListener,className:"rdt-paginator"},s.createElement("ul",{className:"pagination pagination-sm rdt-paginator-pager"},i()))}});t.exports=n},function(t,e,r){"use strict";var s=r(1),n=r(11),o=s.createClass({displayName:"RDTCell",componentWillReceiveProps:function(){this.setState({editMode:!1})},convertToType:function(t,e){return"number"==typeof t?t%1===0?parseInt(e):parseFloat(e):e},getDisplayStyle:function(){var t=this.refs.td.getDOMNode(),e=t.offsetWidth,r=t.offsetHeight,s=t.offsetLeft,n=t.offsetTop;return{width:e,height:r,top:n,left:s}},componentDidMount:function(){this.refs.input&&this.refs.input.getDOMNode().focus()},componentDidUpdate:function(){this.refs.input&&this.refs.input.getDOMNode().focus()},onClickHandler:function(t){t.target;!this.state.editMode&&this.props.col.editable&&this.setState({editMode:!0})},onKeyUp:function(t){var e=t.type,r=t.which,s=13;if("keyup"===e&&r===s&&this.refs.input){{var n=this.convertToType(this.props.record[this.props.property],this.refs.input.getDOMNode().value),o=this.props.datasource;this.props.index}o.updateRecord(this.props.index,this.props.property,n,this.props.col),this.setState({editMode:!1}),this.props.onCellChange&&this.props.onCellChange()}},onBlur:function(){this.setState({editMode:!1})},getInitialState:function(){return{record:this.props.record,editMode:!1}},createEditor:function(){var t=this.props.col.editable||!1,e=this.state.editMode;return t&&e?s.createElement("input",{onBlur:this.onBlur,className:"rdt-editor",style:this.getDisplayStyle(),onKeyUp:this.onKeyUp,onChange:this.onInputChange,ref:"input",defaultValue:this.getValue()}):null},getValue:function(){var t=this.props.property;return n.extractValue(t,this.props.datasource.propertyConfigMap[t].path,this.props.record)},renderElement:function(t,e,r,n,o){var i=this.props.col.renderer;if("function"==typeof i)try{return i.call(i,t,e,r,n,o,s)}catch(a){return console.log(a),null}},tdCellDecoration:function(t,e,r){var s=this.props.col.decorator,n=null,o="",i={},a="",p={};if("function"==typeof s)try{n=s.call(s,t,e,r),"string"==typeof n?o=n:(o=n.className||"",i=n.style||{},a=n.cellClassName||"",p=n.cellStyle||{})}catch(c){console.log(c)}else"string"==typeof s&&(o=s);return{className:o,style:i,cellClassName:a,cellStyle:p}},render:function(){var t=this.props.record,e=this.props.property,r=this.getValue(),n=null;n=this.props.col.formatter?this.props.col.formatter(r,e,t,s):r;var o=this.tdCellDecoration(r,e,t),i=null;return this.props.col.renderer&&(i=this.renderElement(r,n,o,e,t)),i||(i=s.createElement("div",null,n)),s.createElement("td",{className:o.className,style:o.style,ref:"td",onClick:this.onClickHandler,"data-property":e,key:e},s.createElement("div",{className:o.cellClassName,style:o.cellStyle},i),this.createEditor())}});t.exports=o},function(t){"use strict";t.exports={updateRecord:function(t,e,r,s){var n=r,o=n.path?n.path:t,i=n.setter?function(t,e,r){var n=r.setter;"string"==typeof r.setter?s[r.setter](t,e,r,s):n.call(s,t,e,r,s)}:function(){o.split(".").reduce(function(t,r,s,n){return s!==n.length-1?t[r]:void("function"==typeof t[r]?t[r](e):t[r]=e)},s)};i.call(s,e,t,n,s)},colsToMap:function(t){var e={};return t.cols.forEach(function(t){e[t.property]=t}),e},extractValue:function(t,e,r){var s="";return"string"==typeof t&&(e?s="string"==typeof e?e.split(".").reduce(function(t,e){return t&&e?t[e]:null},r):e(t,r):(s=r[t],"function"==typeof s&&(s=s.call(r)))),s},extractSortableType:function(t,e){return"string"==typeof t&&"string"==typeof e?String:"number"==typeof t&&"number"==typeof e?Number:t instanceof Date&&e instanceof Date?Date:null},compare:function(t,e,r,s){return t===Number?e&&r?(r-e)*s:e&&!r?e*s:!e&&r?r*s:0:e?e.localeCompare(r)*s:r?r.localeCompare(e)*s:0}}},function(t){function e(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return"function"==typeof t}function s(t){return"number"==typeof t}function n(t){return"object"==typeof t&&null!==t}function o(t){return void 0===t}t.exports=e,e.EventEmitter=e,e.prototype._events=void 0,e.prototype._maxListeners=void 0,e.defaultMaxListeners=10,e.prototype.setMaxListeners=function(t){if(!s(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},e.prototype.emit=function(t){var e,s,i,a,p,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||n(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(s=this._events[t],o(s))return!1;if(r(s))switch(arguments.length){case 1:s.call(this);break;case 2:s.call(this,arguments[1]);break;case 3:s.call(this,arguments[1],arguments[2]);break;default:for(i=arguments.length,a=new Array(i-1),p=1;i>p;p++)a[p-1]=arguments[p];s.apply(this,a)}else if(n(s)){for(i=arguments.length,a=new Array(i-1),p=1;i>p;p++)a[p-1]=arguments[p];for(c=s.slice(),i=c.length,p=0;i>p;p++)c[p].apply(this,a)}return!0},e.prototype.addListener=function(t,s){var i;if(!r(s))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(s.listener)?s.listener:s),this._events[t]?n(this._events[t])?this._events[t].push(s):this._events[t]=[this._events[t],s]:this._events[t]=s,n(this._events[t])&&!this._events[t].warned){var i;i=o(this._maxListeners)?e.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[t].length>i&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())}return this},e.prototype.on=e.prototype.addListener,e.prototype.once=function(t,e){function s(){this.removeListener(t,s),n||(n=!0,e.apply(this,arguments))}if(!r(e))throw TypeError("listener must be a function");var n=!1;return s.listener=e,this.on(t,s),this},e.prototype.removeListener=function(t,e){var s,o,i,a;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(s=this._events[t],i=s.length,o=-1,s===e||r(s.listener)&&s.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(n(s)){for(a=i;a-->0;)if(s[a]===e||s[a].listener&&s[a].listener===e){o=a;break}if(0>o)return this;1===s.length?(s.length=0,delete this._events[t]):s.splice(o,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},e.prototype.removeAllListeners=function(t){var e,s;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(s=this._events[t],r(s))this.removeListener(t,s);else for(;s.length;)this.removeListener(t,s[s.length-1]);return delete this._events[t],this},e.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},e.listenerCount=function(t,e){var s;return s=t._events&&t._events[e]?r(t._events[e])?1:t._events[e].length:0}}])});